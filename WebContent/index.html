<!DOCTYPE html>
<html>
	<head>
	 	<link rel="stylesheet" href="styles.css" />

		<script src="wavesurfer.min.js"></script>

		<style>
			html, body    {
  				height: 100%;
			}
		</style>
 
 		<script type="text/javascript">

// Create an instance
var wavesurfer = Object.create(WaveSurfer);

// Init & load audio file
document.addEventListener('DOMContentLoaded', function () {
    var options = {
        container     : document.querySelector('#waveform'),
        waveColor     : 'violet',
        progressColor : 'purple',
        cursorColor   : 'navy'
    };

    if (location.search.match('scroll')) {
        options.minPxPerSec = 100;
        options.scrollParent = true;
    }

    // Init
    wavesurfer.init(options);
    // Load audio from URL
    wavesurfer.load('download/dubbbb.mp3');

    // Regions
    if (wavesurfer.enableDragSelection) {
        wavesurfer.enableDragSelection({
            color: 'rgba(0, 255, 0, 0.1)'
        });
    }
});

// Play at once when ready
// Won't work on iOS until you touch the page
wavesurfer.on('ready', function () {
    //wavesurfer.play();
});

// Report errors
wavesurfer.on('error', function (err) {
    console.error(err);
});

// Do something when the clip is over
wavesurfer.on('finish', function () {
    console.log('Finished playing');
});


/* Progress bar */
document.addEventListener('DOMContentLoaded', function () {
    var progressDiv = document.querySelector('#progress-bar');
    var progressBar = progressDiv.querySelector('.progress-bar');

    var showProgress = function (percent) {
        progressDiv.style.display = 'block';
        progressBar.style.width = percent + '%';
    };

    var hideProgress = function () {
        progressDiv.style.display = 'none';
    };

    wavesurfer.on('loading', showProgress);
    wavesurfer.on('ready', hideProgress);
    wavesurfer.on('destroy', hideProgress);
    wavesurfer.on('error', hideProgress);
});


// Drag'n'drop
document.addEventListener('DOMContentLoaded', function () {
    var toggleActive = function (e, toggle) {
        e.stopPropagation();
        e.preventDefault();
        toggle ? e.target.classList.add('wavesurfer-dragover') :
            e.target.classList.remove('wavesurfer-dragover');
    };

    var handlers = {
        // Drop event
        drop: function (e) {
            toggleActive(e, false);

            // Load the file into wavesurfer
            if (e.dataTransfer.files.length) {
                wavesurfer.loadBlob(e.dataTransfer.files[0]);
            } else {
                wavesurfer.fireEvent('error', 'Not a file');
            }
        },

        // Drag-over event
        dragover: function (e) {
            toggleActive(e, true);
        },

        // Drag-leave event
        dragleave: function (e) {
            toggleActive(e, false);
        }
    };

    var dropTarget = document.querySelector('#drop');
    Object.keys(handlers).forEach(function (event) {
        dropTarget.addEventListener(event, handlers[event]);
    });
});

 		</script>
 	</head>
 <body>

 <div id="demo">
	 <div id="waveform">
		 <div class="progress progress-striped active" id="progress-bar">
			 <div class="progress-bar progress-bar-info"></div>
		 </div>

		 <!-- Here be the waveform -->
	 </div>

	 <div class="controls">
		 <button class="btn btn-primary" data-action="back">
			 <i class="glyphicon glyphicon-step-backward"></i>
			 Backward
		 </button>

		 <button class="btn btn-primary" data-action="play">
			 <i class="glyphicon glyphicon-play"></i>
			 Play
			 /
			 <i class="glyphicon glyphicon-pause"></i>
			 Pause
		 </button>

		 <button class="btn btn-primary" data-action="forth">
			 <i class="glyphicon glyphicon-step-forward"></i>
			 Forward
		 </button>

		 <button class="btn btn-primary" data-action="toggle-mute">
			 <i class="glyphicon glyphicon-volume-off"></i>
			 Toggle Mute
		 </button>
	 </div>
 </div>

	<!-- <table class="wrapper" style="margin-top: auto; margin-bottom: auto;">
      	<tr>
        	<td>
         		<h3 style="border-bottom-style: none;">bndr</h3>
         		<img class="logo-big" src="img/logo1.png" />
				<div id="status" class="box">...</div>
         	</td>
      	</tr>
   	</table>-->
</body>
</html>
